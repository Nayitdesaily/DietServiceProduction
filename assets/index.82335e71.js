import{r as l,o as p,j as n,aj as g}from"./index.716d353f.js";import{C as D,b as w,c as N,d as I,e as M,p as S,f as W,g as L,L as O}from"./index.d779455c.js";import{h as x}from"./es.57ad9124.js";import{b as R}from"./App.d86e94b9.js";import{m as T}from"./mock.b4f0d6d7.js";/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var k=function(t,a){return k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var s in r)r.hasOwnProperty(s)&&(e[s]=r[s])},k(t,a)};function _(t,a){k(t,a);function e(){this.constructor=t}t.prototype=a===null?Object.create(a):(e.prototype=a.prototype,new e)}var j=100,V=100,E=50,v=50,b=50;function P(t){var a=t.className,e=t.counterClockwise,r=t.dashRatio,s=t.pathRadius,o=t.strokeWidth,i=t.style;return l.exports.createElement("path",{className:a,style:Object.assign({},i,z({pathRadius:s,dashRatio:r,counterClockwise:e})),d:B({pathRadius:s,counterClockwise:e}),strokeWidth:o,fillOpacity:0})}function B(t){var a=t.pathRadius,e=t.counterClockwise,r=a,s=e?1:0;return`
      M `+v+","+b+`
      m 0,-`+r+`
      a `+r+","+r+" "+s+" 1 1 0,"+2*r+`
      a `+r+","+r+" "+s+" 1 1 0,-"+2*r+`
    `}function z(t){var a=t.counterClockwise,e=t.dashRatio,r=t.pathRadius,s=Math.PI*2*r,o=(1-e)*s;return{strokeDasharray:s+"px "+s+"px",strokeDashoffset:(a?-o:o)+"px"}}var y=function(t){_(a,t);function a(){return t!==null&&t.apply(this,arguments)||this}return a.prototype.getBackgroundPadding=function(){return this.props.background?this.props.backgroundPadding:0},a.prototype.getPathRadius=function(){return E-this.props.strokeWidth/2-this.getBackgroundPadding()},a.prototype.getPathRatio=function(){var e=this.props,r=e.value,s=e.minValue,o=e.maxValue,i=Math.min(Math.max(r,s),o);return(i-s)/(o-s)},a.prototype.render=function(){var e=this.props,r=e.circleRatio,s=e.className,o=e.classes,i=e.counterClockwise,c=e.styles,h=e.strokeWidth,f=e.text,d=this.getPathRadius(),u=this.getPathRatio();return l.exports.createElement("svg",{className:o.root+" "+s,style:c.root,viewBox:"0 0 "+j+" "+V,"data-test-id":"CircularProgressbar"},this.props.background?l.exports.createElement("circle",{className:o.background,style:c.background,cx:v,cy:b,r:E}):null,l.exports.createElement(P,{className:o.trail,counterClockwise:i,dashRatio:r,pathRadius:d,strokeWidth:h,style:c.trail}),l.exports.createElement(P,{className:o.path,counterClockwise:i,dashRatio:u*r,pathRadius:d,strokeWidth:h,style:c.path}),f?l.exports.createElement("text",{className:o.text,style:c.text,x:v,y:b},f):null)},a.defaultProps={background:!1,backgroundPadding:0,circleRatio:1,classes:{root:"CircularProgressbar",trail:"CircularProgressbar-trail",path:"CircularProgressbar-path",text:"CircularProgressbar-text",background:"CircularProgressbar-background"},counterClockwise:!1,className:"",maxValue:100,minValue:0,strokeWidth:8,styles:{root:{},trail:{},path:{},text:{},background:{}},text:""},a}(l.exports.Component);function C(t){var a=t.rotation,e=t.strokeLinecap,r=t.textColor,s=t.textSize,o=t.pathColor,i=t.pathTransition,c=t.pathTransitionDuration,h=t.trailColor,f=t.backgroundColor,d=a==null?void 0:"rotate("+a+"turn)",u=a==null?void 0:"center center";return{root:{},path:m({stroke:o,strokeLinecap:e,transform:d,transformOrigin:u,transition:i,transitionDuration:c==null?void 0:c+"s"}),trail:m({stroke:h,strokeLinecap:e,transform:d,transformOrigin:u}),text:m({fill:r,fontSize:s}),background:m({fill:f})}}function m(t){return Object.keys(t).forEach(function(a){t[a]==null&&delete t[a]}),t}const H=({lastEvolution:t})=>{D.register(w,N,I,M,S,W,L);const[a,e]=l.exports.useState([]),[r,s]=l.exports.useState([]),[o,i]=l.exports.useState([]);x.locale("es");const c=R();console.log(c),l.exports.useEffect(()=>{i([]),s([]),a.map(d=>{s(u=>[...u,x(d.fecha).format("MMM").charAt(0).toUpperCase().concat(x(d.fecha).format("MMMM DD").slice(1))]),i(u=>[...u,d.peso])})},[a]),l.exports.useEffect(()=>{async function d(){await g.get(`https://dietservice.bitjoins.pe/api/evolucion/${c.id}`).then(u=>{e(u.data.data)})}d()},[]);const h={labels:r,datasets:[{label:null,data:o,tension:.2,borderColor:"white",borderWidth:4,pointBackgroundColor:"#7C0902   ",pointBorderColor:"#7C0902",fill:!0,backgroundColor:"red"}]},f={scales:{y:{grid:{display:!1},ticks:{color:"white",font:{size:14}}},x:{grid:{display:!1},ticks:{color:"white",font:{size:14}}}},animations:{tension:{duration:2e3,easing:"linear",from:.5,to:0,loop:!0}},plugins:{legend:{display:!1}},layout:{padding:1},backgroundColor:"#E09540"};return p("div",{children:[n("h4",{className:"principal-title",children:"Evolucion Tratamiento Nutricional"}),p("div",{className:"container-progress",children:[p("div",{className:"container-progress-chart",children:[n("h4",{className:"container-progress-chart-title",children:"Grasa"}),n(y,{value:t.p_grasa,text:t.p_grasa==null?"0":`${t.p_grasa}%`,styles:C({pathColor:"#24ac90",textColor:"#000000",textSize:"1rem",pathTransitionDuration:2,strokeLinecap:"butt"})}),n("h5",{className:"container-progress-chart-description",children:"Grasa Ideal:"})]}),p("div",{className:"container-progress-chart",children:[n("h4",{className:"container-progress-chart-title",children:"IMC"}),n(y,{value:t.imc,text:t.imc==null?"0":`${t.imc}%`,styles:C({pathColor:"#c074ad",textColor:"#000000",textSize:"1rem",pathTransitionDuration:2,strokeLinecap:"butt"})}),n("h5",{className:"container-progress-chart-description",children:"IMC Ideal:"})]}),p("div",{className:"container-progress-chart",children:[n("h4",{className:"container-progress-chart-title",children:"Masa Muscular"}),n(y,{value:t.p_masa,text:t.p_masa==null?"0":`${t.p_masa}%`,styles:C({pathColor:"#c2d45b",strokeLinecap:"butt",textColor:"#000000",textSize:"1rem",pathTransitionDuration:2})}),n("h5",{className:"container-progress-chart-description",children:"Masa Muscular Ideal:"})]})]}),n("h4",{children:"Evolucion De Peso"}),n("br",{}),n("div",{style:{width:"100%",justifyContent:"center",display:"flex",alignItems:"center"},children:n("div",{style:{width:"70%",display:"flex",justifyContent:"center",alignItems:"center"},children:n(O,{data:h,options:f,style:{backgroundColor:"#E09540",borderRadius:"1rem",padding:"1rem",color:"white"}})})})]})};function $(){var o;const[t,a]=l.exports.useState(null),[e,r]=l.exports.useState(null),s=R();return l.exports.useEffect(()=>{async function i(){await g.get(`https://dietservice.bitjoins.pe/api/plan_alimentacion/last/${s.id}`).then(c=>{r(c.data.data.id)})}i()},[]),l.exports.useEffect(()=>{async function i(){await g.get(`https://dietservice.bitjoins.pe/api/plan-alimentacion-web/dieta-of-today/${e}`).then(c=>{a(c.data.data)})}i()},[e]),p("div",{children:[n("h4",{children:"Plan Del Dia"}),n("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column",padding:"2rem 5rem",gap:"2rem"},children:(t==null?void 0:t.length)==0?n("h5",{children:"No tienes un plan"}):(o=t==null?void 0:t.comidas)==null?void 0:o.map((i,c)=>p("div",{style:{display:"flex",justifyContent:"flex-start",gap:"5rem",alignItems:"center"},children:[n("p",{style:{minWidth:"5rem"},children:i.comida==1?"Desayuno":i.comida==2?"Almuerzo":i.comida==3?"Cena":i.comida==4?"Merienda":null}),n("div",{style:{flex:"1",padding:"1rem",backgroundColor:"#E5B359",color:"white",borderRadius:"1rem"},children:i.descripcion})]},c))})]})}const Y=()=>{T.restore();const[t,a]=l.exports.useState([]),[e,r]=l.exports.useState({});return l.exports.useEffect(()=>{if(t.length>0){const s=t==null?void 0:t.reduce((o,i)=>o.fecha>i.fecha?o:i);r(s)}},[t]),l.exports.useEffect(()=>{async function s(){await g.get("https://dietservice.bitjoins.pe/api/evolucion/6616").then(o=>{a(o.data.data)}),setPending(!1)}s()},[]),n(l.exports.Fragment,{children:p("div",{children:[n(H,{lastEvolution:e}),n("br",{}),n($,{})]})})};export{Y as default};
