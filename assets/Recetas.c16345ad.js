import{j as e,o as a,au as E,bb as L,av as M,aa as g,cv as p,af as h,ag as u,ab as I,$ as V,aj as x,r as m,ai as T}from"./index.45d001ab.js";import{Q as $}from"./index.es.58071c71.js";import{u as k,C as c}from"./index.esm.8ced4184.js";import{a0 as B,T as F}from"./App.62baa5ef.js";import"./emotion-is-prop-valid.esm.22611268.js";import"./emotion-memoize.esm.06f0e458.js";function z({toggle:v,modal:C,recetaSelec:t,setRecetaSelec:f,categorias:_}){const{handleSubmit:w,control:s,reset:y}=k({defaultValues:{recipe_title:"",recipe_description:"",recipe_time:"",recipe_servings:"",recipe_cals:"",recipe_category:"",recipe_ingredients:"",recipe_directions:"",recipe_notes:"",recipe_status:"",recipe_featured:""}});function b(l){t!=null?x.put(`https://dietservice.bitjoins.pe/api/recetas-web/actualizar/${t==null?void 0:t.recipe_id}`,t).then(i=>console.log(i.data.message)):x.post("https://dietservice.bitjoins.pe/api/recetas-web/crear",l).then(i=>console.log(i.data.message)),v(),f(null),y()}function d(l){if(t!=null){let i=l.target.name;f(o=>({...o,[i]:l.target.value}))}}return console.log(t),e("div",{children:a(E,{isOpen:C,toggle:()=>{v(),y(),f(null)},scrollable:!0,children:[e(L,{toggle:()=>{v(),y(),f(null)},children:"Nueva Receta"}),e(M,{children:a("form",{onSubmit:w(b),children:[e(g,{children:e(c,{name:"recipe_title",control:s,render:({field:{value:l,onChange:i,...o}})=>a(p,{children:[e(h,{children:"Titulo"}),e(u,{placeholder:"Ingrese el nombre del restaurante",type:"text",...o,defaultValue:t==null?void 0:t.recipe_title,onChange:n=>{i(n.target.value),d(n)}})]})})}),e(g,{children:e(c,{name:"recipe_description",control:s,render:({field:{value:l,onChange:i,...o}})=>a(p,{children:[e(h,{children:"Descripcion"}),e(u,{placeholder:"Ingrese el nombre del restaurante",type:"textarea",...o,defaultValue:t==null?void 0:t.recipe_description,onChange:n=>{i(n.target.value),d(n)}})]})})}),a(g,{children:[e(I,{children:e(c,{name:"recipe_time",control:s,render:({field:{value:l,onChange:i,...o}})=>a(p,{children:[e(h,{children:"Tiempo"}),e(u,{placeholder:"Ingrese el nombre del restaurante",type:"text",...o,defaultValue:t==null?void 0:t.recipe_time,onChange:n=>{i(n.target.value),d(n)}})]})})}),e(I,{children:e(c,{name:"recipe_servings",control:s,render:({field:{value:l,onChange:i,...o}})=>a(p,{children:[e(h,{children:"Porciones"}),e(u,{placeholder:"Ingrese el nombre del restaurante",type:"text",...o,defaultValue:t==null?void 0:t.recipe_servings,onChange:n=>{i(n.target.value),d(n)}})]})})}),e(I,{children:e(c,{name:"recipe_cals",control:s,render:({field:{value:l,onChange:i,...o}})=>a(p,{children:[e(h,{children:"Calorias"}),e(u,{placeholder:"Ingrese el nombre del restaurante",type:"text",...o,defaultValue:t==null?void 0:t.recipe_cals,onChange:n=>{i(n.target.value),d(n)}})]})})})]}),e(g,{children:e(c,{name:"recipe_category",control:s,render:({field:{value:l,onChange:i,...o}})=>a(p,{children:[e(h,{children:"Categoria"}),a(u,{placeholder:"Seleccione la categoria",type:"select",...o,defaultValue:t==null?void 0:t.recipe_category,onChange:n=>{i(n.target.value),d(n)},children:[e("option",{value:t==null?void 0:t.recipe_category,children:t!=null&&t.recipe_category?t.category_title:"Seleccione el tipo"}),_==null?void 0:_.filter(n=>n.category_id!==(t==null?void 0:t.recipe_category)).map(n=>e("option",{value:n.category_id,children:n.category_title}))]})]})})}),e(g,{children:e(c,{name:"recipe_ingredients",control:s,render:({field:{value:l,onChange:i,...o}})=>a(p,{children:[e(h,{children:"Ingredientes"}),e(u,{placeholder:"Ingrese los ingredientes",type:"textarea",...o,defaultValue:t==null?void 0:t.recipe_ingredients,onChange:n=>{i(n.target.value),d(n)}})]})})}),e(g,{children:e(c,{name:"recipe_directions",control:s,render:({field:{value:l,onChange:i,...o}})=>a(p,{children:[e(h,{children:"Instrucciones"}),e(u,{placeholder:"Ingrese las instrucciones",type:"textarea",...o,defaultValue:t==null?void 0:t.recipe_directions,onChange:n=>{i(n.target.value),d(n)}})]})})}),e(g,{children:e(c,{name:"recipe_notes",control:s,render:({field:{value:l,onChange:i,...o}})=>a(p,{children:[e(h,{children:"Tips"}),e(u,{placeholder:"Ingrese algun tip",type:"textarea",...o,defaultValue:t==null?void 0:t.recipe_notes,onChange:n=>{i(n.target.value),d(n)}})]})})}),e(g,{children:e(c,{name:"recipe_featured",control:s,render:({field:{value:l,onChange:i,...o}})=>a(p,{children:[e(h,{children:"Destacado"}),a(u,{placeholder:"Seleccione el destacado",type:"select",...o,defaultValue:t==null?void 0:t.recipe_featured,onChange:n=>{i(n.target.value),d(n)},children:[e("option",{value:"",children:"Seleccione el destacado"}),e("option",{value:"Si",children:"Si"}),e("option",{value:"No",children:"No"})]})]})})}),e(g,{children:e(c,{name:"recipe_status",control:s,render:({field:{value:l,onChange:i,...o}})=>a(p,{children:[e(h,{children:"Estado"}),a(u,{placeholder:"Seleccione el estado",type:"select",...o,defaultValue:t==null?void 0:t.recipe_status,onChange:n=>{i(n.target.value),d(n)},children:[e("option",{value:"",children:"Seleccione el destacado"}),e("option",{value:"Draft",children:"Draft"}),e("option",{value:"Publish",children:"Publish"})]})]})})}),e(V,{color:"success",type:"submit",children:"Ok"}),e(V,{color:"secondary",children:"Cancel"})]})})]})})}function J(){const[v,C]=m.exports.useState([]),[t,f]=m.exports.useState([]),[_,w]=m.exports.useState([]),[s,y]=m.exports.useState(!0),b=()=>l(!d),[d,l]=m.exports.useState(!1),[i,o]=m.exports.useState(null),[n,D]=m.exports.useState("");m.exports.useEffect(()=>{x.get("https://dietservice.bitjoins.pe/api/recetas-web").then(r=>{C(r.data.data),f(r.data.data),y(!1)}),x.get("https://dietservice.bitjoins.pe/api/categorias").then(r=>w(r.data.data))},[]);function N(r){b(),o(r)}function P(r){return r.filter(j=>j.recipe_title.toLowerCase().includes(n)||j.category_title.toLowerCase().includes(n))}m.exports.useEffect(()=>{let r=P(t);C(r)},[n]);const R=[{name:"Titulo",selector:r=>r.recipe_title,width:"25rem"},{name:"Categoria",selector:r=>r.category_title,width:"10rem",sortable:!0},{name:"Tiempo",selector:r=>r.recipe_time,sortable:!0,width:"8rem"},{name:"Porciones",selector:r=>r.recipe_servings,center:!0},{name:"Calorias",selector:r=>r.recipe_cals,sortable:!0,width:"8rem",wrap:!0},{name:"Destacado",selector:r=>r.recipe_featured,center:!0,sortable:!0,width:"10rem"},{name:"Status",selector:r=>r.recipe_status,center:!0,sortable:!0,width:"10rem"},{name:"Acciones",cell:r=>a("div",{children:[e(B,{onClick:()=>N(r),color:"gray",style:{cursor:"pointer"}}),e(F,{color:"gray",style:{cursor:"pointer"}})]}),center:!0,width:"8rem"},{}];return e("div",{children:s==!1?a("div",{children:[a("div",{style:{display:"flex",justifyContent:"space-between"},children:[e(V,{onClick:b,color:"success",children:"Nuevo"}),a("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"1rem"},children:[e("p",{style:{padding:0,margin:0},children:"Buscar:"}),e(u,{type:"text",style:{width:"25rem"},onChange:r=>D(r.target.value)})]})]}),e("br",{}),e($,{columns:R,data:v,pagination:!0,noDataComponent:"No hay data",progressPending:s,progressComponent:e(T,{children:"Loading..."})}),e(z,{toggle:b,modal:d,recetaSelec:i,setRecetaSelec:o,categorias:_})]}):e(T,{children:"Loading..."})})}export{J as default};
