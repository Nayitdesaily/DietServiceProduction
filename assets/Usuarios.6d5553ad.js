import{r as h,aj as g,j as e,o,au as I,bb as B,av as M,aa as U,ab as s,cv as l,af as c,ag as d,$ as b,ai as N}from"./index.30301496.js";import{Q as P}from"./index.es.6151ffaa.js";import{u as _,C as u}from"./index.esm.c2f7552f.js";import{S as j,w as R}from"./sweetalert2-react-content.es.c7ef3522.js";import"./emotion-is-prop-valid.esm.22611268.js";import"./emotion-memoize.esm.06f0e458.js";function L({toggle:p,modal:f}){const{handleSubmit:v,control:i,reset:m}=_({defaultValues:{nombres:"",rpc:""}}),[x,C]=h.exports.useState([]),[S,w]=h.exports.useState([]);h.exports.useEffect(()=>{g.get("https://dietservice.bitjoins.pe/api/consultorios").then(a=>C(a.data)),g.get("https://dietservice.bitjoins.pe/api/empresas").then(a=>w(a.data))},[]);function y(a){g.post("https://dietservice.bitjoins.pe/api/usuario-admin/registro",a).then(n=>{n.data=="Las contrase\xF1as no son iguales"?alert("Las contrase\xF1as no son identicas"):(alert("Usuario creado correctamente"),p(),m())})}return e("div",{children:o(I,{isOpen:f,toggle:()=>{p(),m()},scrollable:!0,size:"lg",children:[e(B,{toggle:()=>{p(),m()},children:"Nuevo Usuario"}),e(M,{children:o("form",{onSubmit:v(y),children:[o(U,{children:[e(s,{xs:5,children:e(u,{name:"nombres",control:i,render:({field:{value:a,onChange:n,...t}})=>o(l,{children:[e(c,{children:"Nombres"}),e(d,{placeholder:"Ingrese los nombres",type:"text",...t,onChange:r=>{n(r.target.value)}})]})})}),e(s,{children:e(u,{name:"rpc",control:i,render:({field:{value:a,onChange:n,...t}})=>o(l,{children:[e(c,{children:"RPC"}),e(d,{placeholder:"Ingrese el rpc",type:"text",...t,onChange:r=>{n(r.target.value)}})]})})}),e(s,{children:e(u,{name:"tipousuario_id",control:i,render:({field:{value:a,onChange:n,...t}})=>o(l,{children:[e(c,{children:"Nutricionista"}),o(d,{type:"select",...t,onChange:r=>{n(r.target.value)},children:[e("option",{value:"",children:"Seleccione el tipo"}),e("option",{value:2,children:"admin"}),e("option",{value:3,children:"nutricionista"})]})]})})})]}),o(U,{children:[e(s,{xs:5,children:e(u,{name:"email",control:i,render:({field:{value:a,onChange:n,...t}})=>o(l,{children:[e(c,{children:"Usuario(e-mail)"}),e(d,{placeholder:"Ingrese el email",type:"text",...t,onChange:r=>{n(r.target.value)}})]})})}),e(s,{children:e(u,{name:"pass",control:i,render:({field:{value:a,onChange:n,...t}})=>o(l,{children:[e(c,{children:"Password"}),e(d,{placeholder:"Ingrese el password",type:"text",...t,onChange:r=>{n(r.target.value)}})]})})}),e(s,{children:e(u,{name:"repetir_pass",control:i,render:({field:{value:a,onChange:n,...t}})=>o(l,{children:[e(c,{children:"Repetir_password"}),e(d,{placeholder:"Ingrese la contrase\xF1a",type:"text",...t,onChange:r=>{n(r.target.value)}})]})})})]}),o(U,{children:[e(s,{xs:5,children:e(u,{name:"consultorio_id",control:i,render:({field:{value:a,onChange:n,...t}})=>o(l,{children:[e(c,{children:"Consultorio"}),o(d,{type:"select",...t,onChange:r=>{n(r.target.value)},children:[e("option",{value:"",children:"Seleccione el consultorio"}),x.map(r=>e("option",{value:r.id,children:r.nombre}))]})]})})}),e(s,{xs:5,children:e(u,{name:"empresa_id",control:i,render:({field:{value:a,onChange:n,...t}})=>o(l,{children:[e(c,{children:"Empresa"}),o(d,{type:"select",...t,onChange:r=>{n(r.target.value)},children:[e("option",{value:"",children:"Seleccione la empresa"}),S.map(r=>e("option",{value:r.id,children:r.nombre}))]})]})})})]}),e(b,{color:"success",type:"submit",children:"Ok"}),e(b,{color:"secondary",children:"Cancel"})]})})]})})}function T(){const[p,f]=h.exports.useState(!0),v=()=>m(!i),[i,m]=h.exports.useState(!1),[x,C]=h.exports.useState(null),[S,w]=h.exports.useState([]),y=R(j);function a(t){y.fire({title:"Seguro que deseas eliminar este usuario?",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",width:"30rem",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-danger ms-1"}}).then(r=>{r.isConfirmed&&g.delete(`https://dietservice.bitjoins.pe/api/usuario/${t}`).then(E=>console.log(E.data)).then(j.fire("Eliminado!","","danger"))})}return h.exports.useEffect(()=>{g.get("https://dietservice.bitjoins.pe/api/admin-web").then(t=>{w(t.data),f(!1)})},[]),o("div",{children:[e(b,{onClick:v,color:"success",children:"Nuevo"}),e("br",{}),e("br",{}),e(P,{columns:[{name:"Acciones",cell:t=>e("div",{style:{display:"flex",gap:"1rem"},children:e(b,{color:"danger",onClick:()=>a(t.id),children:"Eliminar"})}),center:!0,width:"20rem"},{name:"Item",selector:t=>t.id,width:"12rem",center:!0,sortable:!0},{name:"Usuario",selector:t=>t.email,width:"20rem",sortable:!0},{name:"Nombres",selector:t=>t.nutricionista_nombres,width:"15rem",sortable:!0},{name:"RPC",selector:t=>t.rpc,width:"10rem",sortable:!0},{name:"Estado",selector:t=>t.estado==1?"Activo":"Inactivo",width:"10rem",sortable:!0},{name:"Perfil",selector:t=>t.estado==1?"Activo":"Inactivo",width:"10rem",sortable:!0}],data:S,pagination:!0,noDataComponent:"No hay data",progressPending:p,progressComponent:e(N,{children:"Loading..."})}),e(L,{usuarioSelec:x,toggle:v,modal:i,setUsuarioSelec:C})]})}export{T as default};
