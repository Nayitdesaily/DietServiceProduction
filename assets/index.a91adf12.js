import{r as c,o as p,j as l,aj as y}from"./index.30301496.js";import{C as S,b as _,c as M,d as O,e as T,p as W,f as L,g as j,L as V}from"./index.5ca3bc77.js";import{h as k}from"./es.57ad9124.js";import{b as w}from"./App.58188f50.js";/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var I=function(t,e){return I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var o in s)s.hasOwnProperty(o)&&(a[o]=s[o])},I(t,e)};function z(t,e){I(t,e);function a(){this.constructor=t}t.prototype=e===null?Object.create(e):(a.prototype=e.prototype,new a)}var B=100,$=100,R=50,D=50,P=50;function N(t){var e=t.className,a=t.counterClockwise,s=t.dashRatio,o=t.pathRadius,n=t.strokeWidth,i=t.style;return c.exports.createElement("path",{className:e,style:Object.assign({},i,X({pathRadius:o,dashRatio:s,counterClockwise:a})),d:H({pathRadius:o,counterClockwise:a}),strokeWidth:n,fillOpacity:0})}function H(t){var e=t.pathRadius,a=t.counterClockwise,s=e,o=a?1:0;return`
      M `+D+","+P+`
      m 0,-`+s+`
      a `+s+","+s+" "+o+" 1 1 0,"+2*s+`
      a `+s+","+s+" "+o+" 1 1 0,-"+2*s+`
    `}function X(t){var e=t.counterClockwise,a=t.dashRatio,s=t.pathRadius,o=Math.PI*2*s,n=(1-a)*o;return{strokeDasharray:o+"px "+o+"px",strokeDashoffset:(e?-n:n)+"px"}}var b=function(t){z(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getBackgroundPadding=function(){return this.props.background?this.props.backgroundPadding:0},e.prototype.getPathRadius=function(){return R-this.props.strokeWidth/2-this.getBackgroundPadding()},e.prototype.getPathRatio=function(){var a=this.props,s=a.value,o=a.minValue,n=a.maxValue,i=Math.min(Math.max(s,o),n);return(i-o)/(n-o)},e.prototype.render=function(){var a=this.props,s=a.circleRatio,o=a.className,n=a.classes,i=a.counterClockwise,r=a.styles,f=a.strokeWidth,d=a.text,u=this.getPathRadius(),x=this.getPathRatio();return c.exports.createElement("svg",{className:n.root+" "+o,style:r.root,viewBox:"0 0 "+B+" "+$,"data-test-id":"CircularProgressbar"},this.props.background?c.exports.createElement("circle",{className:n.background,style:r.background,cx:D,cy:P,r:R}):null,c.exports.createElement(N,{className:n.trail,counterClockwise:i,dashRatio:s,pathRadius:u,strokeWidth:f,style:r.trail}),c.exports.createElement(N,{className:n.path,counterClockwise:i,dashRatio:x*s,pathRadius:u,strokeWidth:f,style:r.path}),d?c.exports.createElement("text",{className:n.text,style:r.text,x:D,y:P},d):null)},e.defaultProps={background:!1,backgroundPadding:0,circleRatio:1,classes:{root:"CircularProgressbar",trail:"CircularProgressbar-trail",path:"CircularProgressbar-path",text:"CircularProgressbar-text",background:"CircularProgressbar-background"},counterClockwise:!1,className:"",maxValue:100,minValue:0,strokeWidth:8,styles:{root:{},trail:{},path:{},text:{},background:{}},text:""},e}(c.exports.Component);function v(t){var e=t.rotation,a=t.strokeLinecap,s=t.textColor,o=t.textSize,n=t.pathColor,i=t.pathTransition,r=t.pathTransitionDuration,f=t.trailColor,d=t.backgroundColor,u=e==null?void 0:"rotate("+e+"turn)",x=e==null?void 0:"center center";return{root:{},path:C({stroke:n,strokeLinecap:a,transform:u,transformOrigin:x,transition:i,transitionDuration:r==null?void 0:r+"s"}),trail:C({stroke:f,strokeLinecap:a,transform:u,transformOrigin:x}),text:C({fill:s,fontSize:o}),background:C({fill:d})}}function C(t){return Object.keys(t).forEach(function(e){t[e]==null&&delete t[e]}),t}const A=({lastEvolution:t})=>{S.register(_,M,O,T,W,L,j);const[e,a]=c.exports.useState([]),[s,o]=c.exports.useState([]),[n,i]=c.exports.useState([]),[r,f]=c.exports.useState({});k.locale("es");const d=w();console.log(e),c.exports.useEffect(()=>{i([]),o([]);const h=e;h.reverse(),h.slice(-12).map(m=>{o(g=>[...g,k(m.fecha).format("MMM").charAt(0).toUpperCase().concat(k(m.fecha).format("MMM DD YY").slice(1))]),i(g=>[...g,m.peso])})},[e]),c.exports.useEffect(()=>{async function h(){var m;await y.get(`https://dietservice.bitjoins.pe/api/evolucion/${d==null?void 0:d.id}`).then(g=>{a(g.data.data)}),await y.get(`https://dietservice.bitjoins.pe/api/web/personas/${(m=d==null?void 0:d.persona_id)==null?void 0:m.id}`).then(g=>{f(g.data.data)})}h()},[]);function u(){const h=parseInt(r==null?void 0:r.talla)/100;return r!=null&&r.peso_ideal?(parseInt(r==null?void 0:r.peso_ideal)/(h*h)).toFixed(2):0}console.log(e);const x={labels:s,datasets:[{label:null,data:n,tension:.2,borderColor:"white",borderWidth:4,pointBackgroundColor:"#7C0902   ",pointBorderColor:"#7C0902",fill:!0,backgroundColor:"red"}]},E={scales:{y:{grid:{display:!1},ticks:{color:"white",font:{size:14}}},x:{grid:{display:!1},ticks:{color:"white",font:{size:14}}}},animations:{tension:{duration:2e3,easing:"linear",from:.5,to:0,loop:!0}},plugins:{legend:{display:!1}},layout:{padding:1},backgroundColor:"#E09540"};return p("div",{children:[l("h4",{className:"principal-title",children:"Evolucion Tratamiento Nutricional"}),p("div",{className:"container-progress",children:[p("div",{className:"container-progress-chart",children:[l("h4",{className:"container-progress-chart-title",children:"Grasa"}),l(b,{value:t.p_grasa,text:t.p_grasa==null?"0":`${t.p_grasa}%`,styles:v({pathColor:"#24ac90",textColor:"#000000",textSize:"1rem",pathTransitionDuration:2,strokeLinecap:"butt"})}),p("h5",{className:"container-progress-chart-description",children:["Grasa Ideal: ",r==null?void 0:r.p_grasa_ideal," % "]})]}),p("div",{className:"container-progress-chart",children:[l("h4",{className:"container-progress-chart-title",children:"IMC"}),l(b,{value:t.imc,text:t.imc==null?"0":parseInt(t.imc)<=16?"Delgadez Severa":parseInt(t.imc)<17?"Delgadez Moderada":parseInt(t.imc)<=18.49?"Delgadez Aceptable":parseInt(t.imc)<25?"Peso Normal":parseInt(t.imc)<30?"Sobrepeso":parseInt(t.imc)<35?"Obeso Tipo I":parseInt(t.imc)<=40?"Obeso Tipo II":parseInt(t.imc)<=200?"Obeso Tipo III":null,styles:v({pathColor:"#c074ad",textColor:"#000000",textSize:".9rem",pathTransitionDuration:2,strokeLinecap:"butt"})}),p("h5",{className:"container-progress-chart-description",children:["IMC Ideal: ",u()," %"]})]}),p("div",{className:"container-progress-chart",children:[l("h4",{className:"container-progress-chart-title",children:"Masa Muscular"}),l(b,{value:t.p_masa,text:t.p_masa==null?"0":`${t.p_masa}%`,styles:v({pathColor:"#c2d45b",strokeLinecap:"butt",textColor:"#000000",textSize:"1rem",pathTransitionDuration:2})}),p("h5",{className:"container-progress-chart-description",children:["Masa Muscular Ideal: ",r==null?void 0:r.p_masa_muscular," %"]})]})]}),l("h4",{children:"Evolucion De Peso"}),l("br",{}),l("div",{style:{width:"100%",justifyContent:"center",display:"flex",alignItems:"center"},children:l("div",{style:{width:"70%",display:"flex",justifyContent:"center",alignItems:"center"},children:l(V,{data:x,options:E,style:{backgroundColor:"#E09540",borderRadius:"1rem",padding:"1rem",color:"white"}})})})]})};function G(){var n;const[t,e]=c.exports.useState(null),[a,s]=c.exports.useState(null),o=w();return c.exports.useEffect(()=>{async function i(){await y.get(`https://dietservice.bitjoins.pe/api/plan_alimentacion/last/${o.id}`).then(r=>{s(r.data.data.id)})}i()},[]),c.exports.useEffect(()=>{async function i(){await y.get(`https://dietservice.bitjoins.pe/api/plan-alimentacion-web/dieta-of-today/${a}`).then(r=>{e(r.data.data)})}i()},[a]),p("div",{children:[l("h4",{children:"Plan Del Dia"}),l("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column",padding:"2rem 5rem",gap:"2rem"},children:(t==null?void 0:t.length)==0?l("h5",{children:"No tienes un plan"}):(n=t==null?void 0:t.comidas)==null?void 0:n.map((i,r)=>p("div",{style:{display:"flex",justifyContent:"flex-start",gap:"5rem",alignItems:"center"},children:[l("p",{style:{minWidth:"5rem"},children:i.comida==1?"Desayuno":i.comida==2?"Almuerzo":i.comida==3?"Cena":i.comida==4?"Merienda":null}),l("div",{style:{flex:"1",padding:"1rem",backgroundColor:"#E5B359",color:"white",borderRadius:"1rem"},children:i.descripcion})]},r))})]})}const J=()=>{const[t,e]=c.exports.useState([]),[a,s]=c.exports.useState({}),o=w();return c.exports.useEffect(()=>{if(t.length>0){const n=t==null?void 0:t.reduce((i,r)=>i.fecha>r.fecha?i:r);s(n)}},[t]),c.exports.useEffect(()=>{async function n(){await y.get(`https://dietservice.bitjoins.pe/api/evolucion/${o==null?void 0:o.id}`).then(i=>{e(i.data.data)})}n()},[]),l(c.exports.Fragment,{children:p("div",{children:[l(A,{lastEvolution:a}),l("br",{}),l(G,{})]})})};export{J as default};
