import{r as p,o as r,j as e,$ as B,c8 as f,bZ as z,b_ as G,b$ as Q,aa as V,cv as M,af as $,ag as D,ab as H,aj as O,au as K,bb as X,av as Y,ai as S,bW as ee,D as te,x as ne,y as R}from"./index.8ea34c3d.js";import{T as U,a as Z,b as W,c as k}from"./Tab.74c5bc08.js";import{Q as re}from"./index.es.0017875f.js";import{m as oe}from"./mock.de1a511a.js";import{u as q,C as A}from"./index.esm.77fadc0f.js";import{T as J}from"./App.420b7a59.js";import{B as N}from"./Box.b5a19d7e.js";import"./emotion-react.browser.esm.c78c3819.js";import"./emotion-memoize.esm.06f0e458.js";import"./emotion-is-prop-valid.esm.22611268.js";import"./TransitionGroup.ae2cdf37.js";function le({dietas:u,setDietas:b}){const[t,C]=p.exports.useState("1"),I=l=>{t===l?C():C(l)};function g(l){const s=[...u];s.splice(l,1),b(s)}function T(){b(l=>[...l,[{comida:"1",descripcion:"",id:"",opcion:(l.length+1).toString(),planalimentacion_id:""},{comida:"2",descripcion:"",id:"",opcion:(l.length+1).toString(),planalimentacion_id:""},{comida:"3",descripcion:"",id:"",opcion:(l.length+1).toString(),planalimentacion_id:""},{comida:"4",descripcion:"",id:"",opcion:(l.length+1).toString(),planalimentacion_id:""}]])}const[j,x]=p.exports.useState(null),P=l=>{x(l)},E=()=>{x(null)},_=(l,s,h)=>{const{value:m}=l.target;b(a=>a.map((c,o)=>o===s?c.map((n,v)=>v===h?{...n,descripcion:m}:n):c))};return r("div",{children:[e(B,{color:"success",onClick:()=>T(),children:"Agregar opcion"}),e("ul",{children:u.map((l,s)=>e("li",{style:{listStyle:"none"},children:e(f,{open:t,toggle:I,style:{padding:0,margin:0},children:r(z,{children:[r("div",{style:{display:"flex",alignItems:"center"},children:[e(J,{size:20,onClick:()=>g(s),style:{color:j===s?"red":"black",cursor:"pointer"},onMouseEnter:()=>P(s),onMouseLeave:E}),r(G,{targetId:s,children:[" Opcion # ",s+1]})]}),e(Q,{accordionId:s,children:l.map((h,m)=>e(V,{children:r(M,{children:[e($,{children:h.comida==1?"Desayuno":h.comida==2?"Almuerzo":h.comida==3?"Cena":h.comida==4?"Merienda":null}),e(D,{name:"descripcion",placeholder:"Ingrese la comida",type:"textarea",defaultValue:h==null?void 0:h.descripcion,onChange:a=>_(a,s,m)})]})},m))})]})})},s))})]})}function se({planSeleccionado:u,dietas:b,setDietas:t,recomendaciones:C,setRecomendaciones:I}){const[g,T]=p.exports.useState("dieta"),{handleSubmit:j,control:x}=q({}),[P,E]=p.exports.useState(null),[_,l]=p.exports.useState([1,2,3,4]);console.log(_);const s=(d,i)=>{T(i)};p.exports.useEffect(()=>{async function d(){await O.get(`https://dietservice.bitjoins.pe/api/plan-alimentacion/dietas/web/${u==null?void 0:u.planalimentacion_id}`).then(i=>{t(i.data)}),await O.get(`https://dietservice.bitjoins.pe/api/recomendaciones-web/${u==null?void 0:u.planalimentacion_id}`).then(i=>{I(i.data)})}d()},[]);const[h,m]=p.exports.useState("1"),a=d=>{h===d?m():m(d)},c=d=>{E(d)},o=()=>{E(null)},n=(d,i)=>{const{value:w}=d.target;I(F=>F.map((y,L)=>L===i?{...y,recomendacion:w}:y))},v=(d,i)=>{const{value:w}=d.target;I(F=>F.map((y,L)=>L===i?{...y,tipo:parseInt(w)}:y))};return console.log(C),e("div",{children:e(N,{sx:{width:"100%",typography:"body1"},children:r(U,{value:g,children:[e(N,{sx:{borderBottom:1,borderColor:"divider"},children:r(Z,{onChange:s,"aria-label":"lab API tabs example",children:[e(W,{label:"Dieta",value:"dieta"}),e(W,{label:"Recomendaciones",value:"recomendaciones"}),e(W,{label:"Ejercicios",value:"ejercicios"}),e(W,{label:"Patologia",value:"patologia"})]})}),e(k,{value:"dieta",children:e(le,{dietas:b,setDietas:t})}),e(k,{value:"recomendaciones",children:e("ul",{children:C.map((d,i)=>e("li",{style:{listStyle:"none"},children:e(f,{open:h,toggle:a,style:{padding:0,margin:0},children:r(z,{children:[r("div",{style:{display:"flex",alignItems:"center"},children:[e(J,{size:20,style:{color:P===i?"red":"black",cursor:"pointer"},onMouseEnter:()=>c(i),onMouseLeave:o}),r(G,{targetId:i,children:[" Opcion ",i+1]})]}),e(Q,{accordionId:i,children:r(V,{children:[e(H,{children:e(A,{name:"tipo",control:x,render:({field:{onChange:w,value:F}})=>r(M,{children:[e($,{children:"Tipo"}),r(D,{placeholder:"Ingrese el tipo",type:"select",defaultValue:d==null?void 0:d.tipo,onChange:y=>{v(y,i),w(y.target.value)},children:[e("option",{value:"1",children:"1"}),e("option",{value:"2",children:"2"}),e("option",{value:"3",children:"3"}),e("option",{value:"4",children:"4"})]})]})})}),e(H,{children:e(A,{name:"recomendacion",control:x,render:({field:{onChange:w,value:F}})=>e(M,{children:e(D,{placeholder:"Ingrese la recomendacion",type:"textarea",onChange:y=>{n(y,i),w(y.target.value)},defaultValue:d==null?void 0:d.recomendacion})})})})]})})]})})},i))})}),e(k,{value:"ejercicios",children:"Item Three"}),e(k,{value:"patologia",children:"Item Three"})]})})})}function ae({modal:u,toggle:b,filaSeleccionada:t,setFilaSeleccionada:C}){const{handleSubmit:I,control:g,reset:T}=q({}),[j,x]=p.exports.useState([]),[P,E]=p.exports.useState([]),[_,l]=p.exports.useState([]),[s,h]=p.exports.useState([]);async function m(a){await O.post("https://dietservice.bitjoins.pe/api/plan_alimentacion/create_web",a).then(c=>{var o,n;if(c.status=200){console.log(c);const v=(n=(o=c==null?void 0:c.data)==null?void 0:o.data)==null?void 0:n.id;j.map(d=>{d.map(i=>{i.planalimentacion_id=v.toString(),O.post("https://dietservice.bitjoins.pe/api/dieta/create",i).then(w=>console.log(w))})})}})}return p.exports.useEffect(()=>{async function a(){await O.get("https://dietservice.bitjoins.pe/api/nutricionistas").then(c=>{l(c.data)}),await O.get("https://dietservice.bitjoins.pe/api/usuarios-web").then(c=>{h(c.data)})}a()},[]),e("div",{children:r(K,{isOpen:u,toggle:b,fullscreen:!0,scrollable:!0,children:[e(X,{toggle:()=>{b(),T(),C({})},children:"Modal title"}),e(Y,{children:r("form",{onSubmit:I(m),children:[e(V,{children:e(A,{name:"fecultimaact",control:g,render:({field:{value:a,...c}})=>r(M,{children:[e($,{children:"Fecha"}),e(D,{placeholder:"Ingrese la fecha de inicio",type:"date",...c})]})})}),e(V,{children:e(A,{name:"nombre",control:g,defaultValue:t==null?void 0:t.plan,render:({field:a})=>r(M,{children:[e($,{children:"Plan"}),e(D,{placeholder:"Ingrese el nombre del plan",type:"text",...a})]})})}),r(V,{children:[e(H,{children:e(A,{name:"usuario_id",control:g,defaultValue:t==null?void 0:t.usuario_id,render:({field:{onChange:a,value:c}})=>r(M,{children:[e($,{children:"Cliente"}),r(D,{placeholder:"Seleccione el cliente",type:"select",onChange:o=>a(o.target.value),children:[r("option",{value:t==null?void 0:t.usuario_id,children:[t==null?void 0:t.nombre," ",t==null?void 0:t.apellido]}),s==null?void 0:s.filter(o=>o.usuario_id!=(t==null?void 0:t.usuario_id)).map((o,n)=>r("option",{value:o==null?void 0:o.usuario_id,children:[o==null?void 0:o.nombre," ",o==null?void 0:o.apellido]},n))]})]})})}),e(H,{children:e(A,{name:"nutricionista_id",control:g,defaultValue:t==null?void 0:t.nutricionista_id,render:({field:{onChange:a,value:c}})=>r(M,{children:[e($,{children:"Nutricionista"}),r(D,{placeholder:"Seleccione el nutricionista",type:"select",onChange:o=>a(o.target.value),children:[e("option",{value:t==null?void 0:t.nutricionista_id,children:t==null?void 0:t.nutricionista_nombres}),_==null?void 0:_.map((o,n)=>e("option",{value:o==null?void 0:o.id,children:o==null?void 0:o.nombres},n))]})]})})})]}),r(V,{children:[e(H,{children:e(A,{name:"tips",control:g,defaultValue:t==null?void 0:t.tips,render:({field:a})=>r(M,{children:[e($,{children:"Tips"}),e(D,{placeholder:"Ingrese el tip",type:"textarea",...a})]})})}),e(H,{children:e(A,{name:"notas",control:g,defaultValue:t==null?void 0:t.notas,render:({field:a})=>r(M,{children:[e($,{children:"Notas"}),e(D,{placeholder:"Ingresa las notas",type:"textarea",...a})]})})})]}),e(se,{planSeleccionado:t,dietas:j,setDietas:x,recomendaciones:P,setRecomendaciones:E}),e(B,{color:"success",type:"submit",children:"Ok"}),e(B,{color:"secondary",onClick:()=>{b(),T(),C({})},children:"Cancel"})]})})]})})}function ie({direction:u}){oe.restore();const[b,t]=p.exports.useState("historico"),[C,I]=p.exports.useState([]),[g,T]=p.exports.useState(!0),[j,x]=p.exports.useState(!1),[P,E]=p.exports.useState(null),[_,l]=p.exports.useState({}),[s,h]=p.exports.useState(!1),m=()=>h(!s),a=n=>{P===n?x(!j):(x(!0),E(n))};p.exports.useEffect(()=>{async function n(){await O.get("https://dietservice.bitjoins.pe/api/plan_alimentacion").then(v=>{I(v.data)}),T(!1)}n()},[]);const c=(n,v)=>{t(v)},o=[{cell:n=>r(ee,{isOpen:j&&P===n,toggle:()=>a(n),direction:u,children:[e(te,{caret:!0,children:"Opciones"}),r(ne,{children:[e(R,{children:"Detalle"}),e(R,{onClick:m,children:"Editar"}),e(R,{onClick:()=>{m(),l(n)},children:"Copiar"})]})]})},{name:"Item",selector:(n,v)=>v+1,center:!0,maxWidth:"2rem"},{name:"Plan",selector:n=>n.plan,minWidth:"12rem",sortable:!0},{name:"Estado",selector:n=>n.estado,minWidth:"12rem",sortable:!0},{name:"Cliente",selector:n=>`${n.nombre} ${n.apellido}`,minWidth:"12rem",sortable:!0},{name:"Usuario",selector:n=>n.email,minWidth:"12rem",sortable:!0},{name:"Distrito",selector:n=>n.estado,minWidth:"12rem",sortable:!0},{name:"Fecha",selector:n=>n.fecultimaact,minWidth:"12rem",sortable:!0},{name:"Nutricionista",selector:n=>n.nutricionista_nombres,minWidth:"12rem",sortable:!0},{name:"Contacto",selector:n=>n.contacto,minWidth:"12rem",sortable:!0}];return e("div",{children:e(p.exports.Fragment,{children:r(U,{value:b,children:[r(Z,{onChange:c,"aria-label":"simple tabs example",children:[e(W,{value:"historico",label:"Historico"}),e(W,{value:"plan",label:"Plan"}),e(W,{value:"galeria",label:"Galeria"})]}),r(k,{value:"historico",children:[e(re,{columns:o,data:C,pagination:!0,noDataComponent:"No hay data",progressPending:g,progressComponent:e(S,{children:"Loading..."})}),e(ae,{modal:s,toggle:m,filaSeleccionada:_,setFilaSeleccionada:l})]}),e(k,{value:"plan"}),e(k,{value:"galeria"})]})})})}ie.propTypes={direction:"down"};export{ie as default};
