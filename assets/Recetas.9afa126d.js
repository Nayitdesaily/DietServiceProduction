import{j as e,o,au as j,bb as T,av as D,aa as c,cv as d,af as u,ag as p,ab as w,$ as V,aj as y,r as v,ai as I}from"./index.365e3ad1.js";import{Q as N}from"./index.es.72966381.js";import{u as P,C as h}from"./index.esm.b088bfd3.js";import{a0 as R,T as E}from"./App.cc007f5c.js";import"./emotion-is-prop-valid.esm.22611268.js";import"./emotion-memoize.esm.06f0e458.js";function M({toggle:_,modal:b,recetaSelec:i,setRecetaSelec:g,categorias:m}){const{handleSubmit:C,control:l,reset:f}=P({defaultValues:{recipe_title:"",recipe_description:"",recipe_time:"",recipe_servings:"",recipe_cals:"",recipe_category:"",recipe_ingredients:"",recipe_directions:"",recipe_notes:"",recipe_status:"",recipe_featured:""}});function x(a){i!=null?y.put(`https://dietservice.bitjoins.pe/api/recetas-web/actualizar/${i==null?void 0:i.recipe_id}`,i).then(r=>console.log(r.data.message)):y.post("https://dietservice.bitjoins.pe/api/recetas-web/crear",a).then(r=>console.log(r.data.message)),_(),g(null),f()}function s(a){if(i!=null){let r=a.target.name;g(t=>({...t,[r]:a.target.value}))}}return console.log(i),e("div",{children:o(j,{isOpen:b,toggle:()=>{_(),f(),g(null)},scrollable:!0,children:[e(T,{toggle:()=>{_(),f(),g(null)},children:"Nueva Receta"}),e(D,{children:o("form",{onSubmit:C(x),children:[e(c,{children:e(h,{name:"recipe_title",control:l,render:({field:{value:a,onChange:r,...t}})=>o(d,{children:[e(u,{children:"Titulo"}),e(p,{placeholder:"Ingrese el nombre del restaurante",type:"text",...t,defaultValue:i==null?void 0:i.recipe_title,onChange:n=>{r(n.target.value),s(n)}})]})})}),e(c,{children:e(h,{name:"recipe_description",control:l,render:({field:{value:a,onChange:r,...t}})=>o(d,{children:[e(u,{children:"Descripcion"}),e(p,{placeholder:"Ingrese el nombre del restaurante",type:"textarea",...t,defaultValue:i==null?void 0:i.recipe_description,onChange:n=>{r(n.target.value),s(n)}})]})})}),o(c,{children:[e(w,{children:e(h,{name:"recipe_time",control:l,render:({field:{value:a,onChange:r,...t}})=>o(d,{children:[e(u,{children:"Tiempo"}),e(p,{placeholder:"Ingrese el nombre del restaurante",type:"text",...t,defaultValue:i==null?void 0:i.recipe_time,onChange:n=>{r(n.target.value),s(n)}})]})})}),e(w,{children:e(h,{name:"recipe_servings",control:l,render:({field:{value:a,onChange:r,...t}})=>o(d,{children:[e(u,{children:"Porciones"}),e(p,{placeholder:"Ingrese el nombre del restaurante",type:"text",...t,defaultValue:i==null?void 0:i.recipe_servings,onChange:n=>{r(n.target.value),s(n)}})]})})}),e(w,{children:e(h,{name:"recipe_cals",control:l,render:({field:{value:a,onChange:r,...t}})=>o(d,{children:[e(u,{children:"Calorias"}),e(p,{placeholder:"Ingrese el nombre del restaurante",type:"text",...t,defaultValue:i==null?void 0:i.recipe_cals,onChange:n=>{r(n.target.value),s(n)}})]})})})]}),e(c,{children:e(h,{name:"recipe_category",control:l,render:({field:{value:a,onChange:r,...t}})=>o(d,{children:[e(u,{children:"Categoria"}),o(p,{placeholder:"Seleccione la categoria",type:"select",...t,defaultValue:i==null?void 0:i.recipe_category,onChange:n=>{r(n.target.value),s(n)},children:[e("option",{value:i==null?void 0:i.recipe_category,children:i!=null&&i.recipe_category?i.category_title:"Seleccione el tipo"}),m==null?void 0:m.filter(n=>n.category_id!==(i==null?void 0:i.recipe_category)).map(n=>e("option",{value:n.category_id,children:n.category_title}))]})]})})}),e(c,{children:e(h,{name:"recipe_ingredients",control:l,render:({field:{value:a,onChange:r,...t}})=>o(d,{children:[e(u,{children:"Ingredientes"}),e(p,{placeholder:"Ingrese los ingredientes",type:"textarea",...t,defaultValue:i==null?void 0:i.recipe_ingredients,onChange:n=>{r(n.target.value),s(n)}})]})})}),e(c,{children:e(h,{name:"recipe_directions",control:l,render:({field:{value:a,onChange:r,...t}})=>o(d,{children:[e(u,{children:"Instrucciones"}),e(p,{placeholder:"Ingrese las instrucciones",type:"textarea",...t,defaultValue:i==null?void 0:i.recipe_directions,onChange:n=>{r(n.target.value),s(n)}})]})})}),e(c,{children:e(h,{name:"recipe_notes",control:l,render:({field:{value:a,onChange:r,...t}})=>o(d,{children:[e(u,{children:"Tips"}),e(p,{placeholder:"Ingrese algun tip",type:"textarea",...t,defaultValue:i==null?void 0:i.recipe_notes,onChange:n=>{r(n.target.value),s(n)}})]})})}),e(c,{children:e(h,{name:"recipe_featured",control:l,render:({field:{value:a,onChange:r,...t}})=>o(d,{children:[e(u,{children:"Destacado"}),o(p,{placeholder:"Seleccione el destacado",type:"select",...t,defaultValue:i==null?void 0:i.recipe_featured,onChange:n=>{r(n.target.value),s(n)},children:[e("option",{value:"",children:"Seleccione el destacado"}),e("option",{value:"Si",children:"Si"}),e("option",{value:"No",children:"No"})]})]})})}),e(c,{children:e(h,{name:"recipe_status",control:l,render:({field:{value:a,onChange:r,...t}})=>o(d,{children:[e(u,{children:"Estado"}),o(p,{placeholder:"Seleccione el estado",type:"select",...t,defaultValue:i==null?void 0:i.recipe_status,onChange:n=>{r(n.target.value),s(n)},children:[e("option",{value:"",children:"Seleccione el destacado"}),e("option",{value:"Draft",children:"Draft"}),e("option",{value:"Publish",children:"Publish"})]})]})})}),e(V,{color:"success",type:"submit",children:"Ok"}),e(V,{color:"secondary",children:"Cancel"})]})})]})})}function F(){const[_,b]=v.exports.useState([]),[i,g]=v.exports.useState([]),[m,C]=v.exports.useState(!0),l=()=>x(!f),[f,x]=v.exports.useState(!1),[s,a]=v.exports.useState(null);v.exports.useEffect(()=>{y.get("https://dietservice.bitjoins.pe/api/recetas-web").then(n=>{b(n.data.data),C(!1)}),y.get("https://dietservice.bitjoins.pe/api/categorias").then(n=>g(n.data.data))},[]);function r(n){l(),a(n)}const t=[{name:"Titulo",selector:n=>n.recipe_title,width:"25rem"},{name:"Categoria",selector:n=>n.category_title,width:"10rem",sortable:!0},{name:"Tiempo",selector:n=>n.recipe_time,sortable:!0,width:"8rem"},{name:"Porciones",selector:n=>n.recipe_servings,center:!0},{name:"Calorias",selector:n=>n.recipe_cals,sortable:!0,width:"8rem",wrap:!0},{name:"Destacado",selector:n=>n.recipe_featured,center:!0,sortable:!0,width:"10rem"},{name:"Status",selector:n=>n.recipe_status,center:!0,sortable:!0,width:"10rem"},{name:"Acciones",cell:n=>o("div",{children:[e(R,{onClick:()=>r(n),color:"gray",style:{cursor:"pointer"}}),e(E,{color:"gray",style:{cursor:"pointer"}})]}),center:!0,width:"8rem"},{}];return e("div",{children:m==!1?o("div",{children:[e(V,{onClick:l,color:"success",children:"Nuevo"}),e(N,{columns:t,data:_,pagination:!0,noDataComponent:"No hay data",progressPending:m,progressComponent:e(I,{children:"Loading..."})}),e(M,{toggle:l,modal:f,recetaSelec:s,setRecetaSelec:a,categorias:i})]}):e(I,{children:"Loading..."})})}export{F as default};
