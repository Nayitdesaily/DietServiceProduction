import{r as l,j as e,c8 as F,o,bY as H,bZ as L,b_ as N,ag as f,cv as y,am as x,S as C,K as O,ay as R,bf as z,az as G,ah as A,E as _,c0 as Q,A as K,D as U,t as Y,v as $}from"./index.dfabc371.js";import{T as V,e as B,f as D,h as I}from"./TabPanel.26cd81ec.js";import{Q as Z}from"./index.es.511501ef.js";import{m as q}from"./mock.f9508902.js";import{u as J,C as M}from"./index.esm.41490912.js";import{m as X}from"./App.bcc3a833.js";import{B as k}from"./Box.2dd52e5f.js";import"./emotion-react.browser.esm.25185a13.js";import"./emotion-memoize.esm.06f0e458.js";import"./TransitionGroup.d23f4d35.js";import"./emotion-is-prop-valid.esm.22611268.js";function S({dietas:h,setDietas:p}){const[t,u]=l.exports.useState("1"),v=i=>{t===i?u():u(i)},c=i=>{const r=[...h];r.splice(i,1),p(r)},[m,d]=l.exports.useState(null),w=i=>{d(i)},g=()=>{d(null)},T=(i,r,s)=>{const{value:a}=i.target;p(b=>b.map((E,W)=>W===r?E.map((j,n)=>n===s?{...j,descripcion:a}:j):E))};return e("ul",{children:h.map((i,r)=>e("li",{style:{listStyle:"none"},children:e(F,{open:t,toggle:v,style:{padding:0,margin:0},children:o(H,{children:[o("div",{style:{display:"flex",alignItems:"center"},children:[e(X,{size:20,onClick:()=>c(r),style:{color:m===r?"red":"black",cursor:"pointer"},onMouseEnter:()=>w(r),onMouseLeave:g}),o(L,{targetId:r,children:[" Opcion # ",r+1]})]}),e(N,{accordionId:r,children:i.map((s,a)=>e(f,{children:o(y,{children:[e(x,{children:s.comida==1?"Desayuno":s.comida==2?"Almuerzo":s.comida==3?"Cena":s.comida==4?"Merienda":null}),e(C,{name:"descripcion",placeholder:"Ingrese la comida",type:"textarea",defaultValue:s==null?void 0:s.descripcion,onChange:b=>T(b,r,a)})]})},a))})]})})},r))})}function ee({planSeleccionado:h,dietas:p,setDietas:t}){const[u,v]=l.exports.useState("dieta"),c=(m,d)=>{v(d)};return l.exports.useEffect(()=>{async function m(){await O.get(`https://dietservice.bitjoins.pe/api/plan-alimentacion/dietas/web/${h==null?void 0:h.planalimentacion_id}`).then(d=>{t(d.data)})}m()},[]),e("div",{children:e(k,{sx:{width:"100%",typography:"body1"},children:o(V,{value:u,children:[e(k,{sx:{borderBottom:1,borderColor:"divider"},children:o(B,{onChange:c,"aria-label":"lab API tabs example",children:[e(D,{label:"Dieta",value:"dieta"}),e(D,{label:"Recomendaciones",value:"recomendaciones"}),e(D,{label:"Ejercicios",value:"ejercicios"}),e(D,{label:"Patologia",value:"patologia"})]})}),e(I,{value:"dieta",children:e(S,{dietas:p,setDietas:t})}),e(I,{value:"recomendaciones",children:"Item Two"}),e(I,{value:"ejercicios",children:"Item Three"}),e(I,{value:"patologia",children:"Item Three"})]})})})}function te({modal:h,toggle:p,filaSeleccionada:t,setFilaSeleccionada:u}){const{handleSubmit:v,control:c,reset:m}=J({}),[d,w]=l.exports.useState([]),[g,T]=l.exports.useState([]);function i(r){console.log(r),console.log(d)}return l.exports.useEffect(()=>{async function r(){await O.get("https://dietservice.bitjoins.pe/api/nutricionistas").then(s=>{T(s.data)})}r()},[]),console.log(g),console.log(t),e("div",{children:o(R,{isOpen:h,toggle:p,fullscreen:!0,scrollable:!0,children:[e(z,{toggle:()=>{p(),m(),u({})},children:"Modal title"}),e(G,{children:o("form",{onSubmit:v(i),children:[e(f,{children:e(M,{name:"fecha de inicio",control:c,render:({field:{value:r,...s}})=>o(y,{children:[e(x,{children:"Fecha"}),e(C,{placeholder:"Ingrese la fecha de inicio",type:"date",...s})]})})}),e(f,{children:e(M,{name:"plan",control:c,defaultValue:t==null?void 0:t.plan,render:({field:r})=>o(y,{children:[e(x,{children:"Plan"}),e(C,{placeholder:"Ingrese el nombre del plan",type:"text",...r})]})})}),o(f,{children:[e(A,{children:e(M,{name:"cliente",control:c,defaultValue:t==null?void 0:t.nutricionista_nombres,render:({field:r})=>o(y,{children:[e(x,{children:"Cliente"}),e(C,{placeholder:"Seleccione el cliente",type:"text",...r})]})})}),e(A,{children:e(M,{name:"nutricionista",control:c,defaultValue:t==null?void 0:t.nutricionista_id,render:({field:{onChange:r,value:s}})=>o(y,{children:[e(x,{children:"Nutricionista"}),o(C,{placeholder:"Seleccione el nutricionista",type:"select",onChange:a=>r(a.target.value),children:[e("option",{value:t==null?void 0:t.nutricionista_id,children:t==null?void 0:t.nutricionista_nombres}),g==null?void 0:g.map((a,b)=>e("option",{value:a==null?void 0:a.id,children:a==null?void 0:a.nombres},b))]})]})})})]}),o(f,{children:[e(A,{children:e(M,{name:"tips",control:c,defaultValue:t==null?void 0:t.tips,render:({field:r})=>o(y,{children:[e(x,{children:"Tips"}),e(C,{placeholder:"Ingrese el tip",type:"textarea",...r})]})})}),e(A,{children:e(M,{name:"notas",control:c,defaultValue:t==null?void 0:t.notas,render:({field:r})=>o(y,{children:[e(x,{children:"Notas"}),e(C,{placeholder:"Ingresa las notas",type:"textarea",...r})]})})})]}),e(ee,{planSeleccionado:t,dietas:d,setDietas:w}),e(_,{color:"success",type:"submit",children:"Ok"}),e(_,{color:"secondary",onClick:()=>{p(),m(),u({})},children:"Cancel"})]})})]})})}function re({direction:h}){q.restore();const[p,t]=l.exports.useState("historico"),[u,v]=l.exports.useState([]),[c,m]=l.exports.useState(!0),[d,w]=l.exports.useState(!1),[g,T]=l.exports.useState(null),[i,r]=l.exports.useState({}),[s,a]=l.exports.useState(!1),b=()=>a(!s),E=n=>{g===n?w(!d):(w(!0),T(n))};l.exports.useEffect(()=>{async function n(){await O.get("https://dietservice.bitjoins.pe/api/plan_alimentacion").then(P=>{v(P.data)}),m(!1)}n()},[]);const W=(n,P)=>{t(P)},j=[{cell:n=>o(K,{isOpen:d&&g===n,toggle:()=>E(n),direction:h,children:[e(U,{caret:!0,children:"Opciones"}),o(Y,{children:[e($,{children:"Detalle"}),e($,{onClick:b,children:"Editar"}),e($,{onClick:()=>{b(),r(n)},children:"Copiar"})]})]})},{name:"Item",selector:(n,P)=>P+1,center:!0,maxWidth:"2rem"},{name:"Plan",selector:n=>n.plan,minWidth:"12rem",sortable:!0},{name:"Estado",selector:n=>n.estado,minWidth:"12rem",sortable:!0},{name:"Cliente",selector:n=>`${n.nombre} ${n.apellido}`,minWidth:"12rem",sortable:!0},{name:"Usuario",selector:n=>n.email,minWidth:"12rem",sortable:!0},{name:"Distrito",selector:n=>n.estado,minWidth:"12rem",sortable:!0},{name:"Fecha",selector:n=>n.fecultimaact,minWidth:"12rem",sortable:!0},{name:"Nutricionista",selector:n=>n.nutricionista_nombres,minWidth:"12rem",sortable:!0},{name:"Contacto",selector:n=>n.contacto,minWidth:"12rem",sortable:!0}];return e("div",{children:e(l.exports.Fragment,{children:o(V,{value:p,children:[o(B,{onChange:W,"aria-label":"simple tabs example",children:[e(D,{value:"historico",label:"Historico"}),e(D,{value:"plan",label:"Plan"}),e(D,{value:"galeria",label:"Galeria"})]}),o(I,{value:"historico",children:[e(Z,{columns:j,data:u,pagination:!0,noDataComponent:"No hay data",progressPending:c,progressComponent:e(Q,{children:"Loading..."})}),e(te,{modal:s,toggle:b,filaSeleccionada:i,setFilaSeleccionada:r})]}),e(I,{value:"plan"}),e(I,{value:"galeria"})]})})})}re.propTypes={direction:"down"};export{re as default};
